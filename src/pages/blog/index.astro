---
import { getCollection } from "astro:content";

import Card from "../../components/Card.astro";
import FormattedDate from "../../components/FormattedDate.astro";

import Layout from "../../layouts/Layout.astro";

const posts = (await getCollection("blog")).sort(
  (a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);
---

<Layout>
  <div class="grid grid-cols-1 lg:grid-cols-2 @container gap-8">
    {
      posts.map((post, idx) => (
        <div
          class={`@container w-full @md:w-1/2 @xl:w-1/3 @3xl:w-1/4 
            ${idx === 0 ? "lg:col-span-2" : "col-span-1"}`}
          style={{
            viewTransitionName: `blogs-${post.id}`,
          }}
        >
          <a href={`/blog/${post.slug}/`} class="w-full no-underline">
            <Card src={post.data.heroImage} alt={post.data.title}>
              <div class="flex justify-between items-center">
                <h4 class="title">{post.data.title}</h4>
                <FormattedDate date={post.data.pubDate} />
              </div>
            </Card>
          </a>
        </div>
      ))
    }
  </div>
</Layout>
