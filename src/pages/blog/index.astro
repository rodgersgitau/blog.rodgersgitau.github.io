---
import { getCollection } from "astro:content";

import FormattedDate from "../../components/FormattedDate.astro";
import Layout from "../../layouts/Layout.astro";

const posts = (await getCollection("blog")).sort(
  (a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);
---

<Layout>
  <section class="mx-auto py-10">
    <ul class="grid grid-cols-1 lg:grid-cols-2 gap-10">
      {
        posts.map((post) => (
          <li class="w-full mx-auto">
            <a
              href={`/blog/${post.slug}/`}
              class="shadow shadow-text/10  p-2 aspect-video w-full"
            >
              <img width={720} height={360} src={post.data.heroImage} alt="" />
              <h4 class="title">{post.data.title}</h4>
              <p class="date">
                <FormattedDate date={post.data.pubDate} />
              </p>
            </a>
          </li>
        ))
      }
    </ul>
  </section>
</Layout>

<style>
  li:nth-of-type(1) {
    grid-column: span 2;
    width: 100%;
    margin: 0 auto;
  }
  a {
    display: grid;
    gap: 0.5rem;
  }

  img {
    height: 100%;
    width: 100%;
    object-fit: cover;
  }
</style>
